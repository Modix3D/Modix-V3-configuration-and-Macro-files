; Macro file for Duet WiFi
; Generated by Modix - Version 3.4 Macro A

M300 S666 P666 		; beep 
M291 S3 R"Probe height adjustment" P"Press OK to continue, or CANCEL to abort"
G4 P300				; wait 300ms
M564 H0 S0			; Negative movements are allowed
G91 				; relative movement
G1 Z5 F200			; lower bed by 5mm
G90 				; absolute movement
M401 				; deploy  the BLTouch probe pin
M291 S3 R"Attention!" P"Probe pin deployed. Verify the tip of the pin is lower than the nozzle"
M402 				; retract the BLTouch probe pin
G28					; home all
M564 H0 S0			; Negative movements are allowed
M561 				; unload heightmap
G91 				; relative movement
G1 Z11 F200			; lower bed by 11mm
G90 				; absolute movement
G1 X150 Y150 F6000	; go to left corner
M300 S666 P666 		; beep
G4 S1 				; wait 1 second
M300 S1111 P444 	; beep
M291 S2 R"Loosen the bolts holding the bracket" P"Place the jig beneath the probe and adjust the Z height until the nozzle almost touches the bed" Z1 ;
M300 S888 P444 		; beep
M291 S2 R"Tighten the bolts" P"Verify that the probe bracket is vertical" ;
G4 S1 				; wait 1s
G91					; relative movement
G1 Z11 F200			; lower bed
G90					; absolute movement
M300 S1111 P666 	; beep 
M291 S2 R"Probe calibration" P" Probe calibration has been completed. We will now verify the bed positioning" ;

G1 Z10 F2000							; ensure the bed is lowered a little
G1 X{move.axes[0].min+0.2} Y200 F3000	; move bed to the left side
M300 S1111 P666 						; beep 
M291 S2 R"Left side" P"Verify that the BLTouch and nozzle are positioned above the bed. If they are not above the bed, adjust the bed so that both the probe and nozzle are above the surface" ;

G1 X{move.axes[0].max-0.2} Y200 F3000	; move bed to the right side
M300 S1111 P666 						; beep 
M291 S2 R"Right side" P"Verify that the BLTouch and nozzle are positioned above the bed. If they are not above the bed, adjust the bed so that both the probe and nozzle are above the surface" ;
M564 S1 H1      						; Disable negative movements

M291 S2 R"You may proceed to the next step" P" Probe calibration has been completed" ;